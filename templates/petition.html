{% extends "base.html" %}
{% block title %}UR Heard - {{petition.title}}{% endblock title %}
<!-- could also just be "UR Heard - View Petition" -->
{% block content %}
	<article class="container">
		<div class="row py-3">
			<div class="col-3 order-2" id="side-panel">
				<div class="sticky-top">
					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">Generic Side Panel</div>
						<div class="card-body">
							<p>(add a cool progress bar or something)</p>
							<p>Count of signatures: {{signature|length}}</p>
							{% if current_user.is_authenticated %}
							<form method="post">
								{{ form.csrf_token }}
								{{ form.user_id(value=current_user.id) }}
								{{ form.petition_id(value=petition.id) }}
								{% if signed %}
									{{ form.submit(value="Unsign This Petition!", class_="btn btn-primary") }}
								{% else %}
									{{ form.submit(value="Sign This Petition!", class_="btn btn-primary") }}
								{% endif %}
							</form>
							{% else %}
								<a href="/login?next=%2Fpetition%2F{{petition.id}}" class="btn btn-primary">Login to sign this petition!</a>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
			<div class="col" id="main">
				<div class="card bg-light mb3" style="max-width: 100rem;">
					<heading class="card-header">
						<h3 class="card-title font-weight-bold">{{petition.title}}</h3>
						<h4 class="card-subtitle">Created {{moment(petition.timestamp).fromNow()}} by <a href="user/{{petition.author_id}}">{{petition.author.name}}</a></h4>
					</heading>
					<div class="card-body">
						<p style="white-space: pre-wrap;">{{petition.body}}</p>
					</div>
				</div>
			</div>
		</div>
	</article>
	{# <div class="d-flex flex-wrap">
		<article class="card m-2">
			<div class="card-body">
				<h3 class="card-title"> petiton title </h3>
				<h4 class="card-subtitle mb-2 text-muted"> by <span class="card-link"> author name </span></h4>
				<p class="card-text text-truncate"> contents of petiton </p>
			</div>
		</article>
	</div> #}
{% endblock content %}
